<app-navbar />

<main class="characters-content">
  <section class="search-section">
    <h1 class="page-title kurama-text">Personagens de Naruto</h1>
    <div class="search-box">
      <input
        type="text"
        class="form-control search-input"
        placeholder="Buscar personagem..."
        [ngModel]="searchTerm()"
        (ngModelChange)="searchTerm.set($event)"
      />
    </div>
  </section>

  @if (loading()) {
    <div class="loading-container">
      <div class="spinner-border text-warning" role="status">
        <span class="visually-hidden">Carregando...</span>
      </div>
      <p class="loading-text">Carregando personagens...</p>
    </div>
  }

  @if (error()) {
    <div class="alert alert-danger" role="alert">
      {{ error() }}
    </div>
  }

  @if (!loading() && !error()) {
    <section class="characters-grid">
      @for (character of filteredCharacters(); track character.id) {
        <app-character-card [item]="toCardItem(character)" />
      } @empty {
        <div class="no-results">
          <p>Nenhum personagem encontrado.</p>
        </div>
      }
    </section>

    <div class="pagination-controls">
      <button
        class="btn btn-outline-warning"
        (click)="prevPage()"
        [disabled]="currentPage() === 1"
      >
        ← Anterior
      </button>
      <span class="page-info">
        Página {{ currentPage() }} de {{ totalPages() }}
      </span>
      <button
        class="btn btn-outline-warning"
        (click)="nextPage()"
        [disabled]="currentPage() === totalPages()"
      >
        Próxima →
      </button>
    </div>
  }
</main>

<app-footer />
